




<!--
 /\* Font Definitions \*/
 @font-face
 {font-family:Helv;
 panose-1:2 11 6 4 2 2 2 3 2 4;}
@font-face
 {font-family:"Cambria Math";
 panose-1:2 4 5 3 5 4 6 3 2 4;}
 /\* Style Definitions \*/
 p.MsoNormal, li.MsoNormal, div.MsoNormal
 {margin-top:0cm;
 margin-right:0cm;
 margin-bottom:8.0pt;
 margin-left:0cm;
 line-height:107%;
 font-size:11.0pt;
 font-family:"Calibri",sans-serif;}
.MsoChpDefault
 {font-size:11.0pt;}
.MsoPapDefault
 {margin-bottom:8.0pt;
 line-height:107%;}
 /\* Page Definitions \*/
 @page WordSection1
 {size:612.0pt 792.0pt;
 margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
 {page:WordSection1;}
-->




**Initial Release 6**



**Function : Extension Manager; Mail;
SMTP**



**SMTPCommandEMCallback** **- Extension
Manager callback for EM\_SMTPCOMMAND**


**----------------------------------------------------------------------------------------------------------**



**Note:** This function is only available as an Extension Manager callback
-- you cannot call this function directly.


 


**#include <extmgr.h>**



STATUS
LNPUBLIC **SMTPCommandEMCallback(**  

      DWORD  SessionID,  

      char \*Command,  

      DWORD  MaxCommandLength,  

      char \*SMTPReply,  

      DWORD  SMTPReplyLength**);**



**Description :**



EM\_SMTPCOMMAND
is called whenever a SMTP command has been received by the SMTP task.


      


The
Extension Manager EM\_BEFORE notification type for the EM\_SMTPCOMMAND event
occurs whenever a SMTP command has been received by the SMTP listener task but
prior to the parsing of the command. 


      


Domino
allocates a buffer that can be used by callback routines for the EM\_BEFORE
notification to modify the command and thus change internal Domino processing. 
NOERROR return status indicates to skip parsing and execution of command.  The
default reply when STATUS is NOERROR is "250 OK".  Return STATUS
values other than ERR\_EM\_CONTINUE and NOERROR from the EM\_BEFORE notification
results in the command being rejected.  A default error message will be
generated by the Domino SMTP server, which can be modified by the callback
routine for the EM\_AFTER notification.  When you reject the command for the
SMTPConnect event with an error code,  the SMTP client will not be
disconnected.   STATUS of ERR\_EM\_CONTINUE will continue normal Domino
processing.


      


SMTP
response to the command entered can be modified during the callback routine of
EM\_AFTER notification.  Care must be taken not to change the reply code from
success to failure or vice-versa as this will cause the sender-SMTP and
receiver-SMTP servers to be out of synch.  Domino supplies a buffer that can be
used by the callback routine to change the SMTP response.


 


**Parameters :**



Input :  

SessionID  -  Unique session identifier for the current session.  

  

Command  -  NULL terminated string containing SMTP command and arguments
received.  

  

MaxCommandLength  -   Size of buffer allocated to modify Command.   EM\_BEFORE
event: Command can be modified in buffer provided  

  

SMTPReplyLength  -  Size of buffer allocated to modify SMTPReply.  

  




Output :  

(routine)  -  Return status from the call   

EM\_BEFORE event: NOERROR skips command parsing/execution.  Value other than
ERR\_EM\_CONTINUE indicates that the callback routine has rejected the command.    

EM\_AFTER event: Value other than ERR\_EM\_CONTINUE is ignored.  

  

  

SMTPReply  -  SMTP response that will be returned to the connecting host. 
EM\_BEFORE event: NULL.  EM\_AFTER event: NULL terminated string containing the
SMTP response that will be returned to the connecting host.  Callback routine
can modify the string.  

  




 **See Also :**


**[EM\_xxx](notes:///8525872100478C66/61FD4E9848264AD28525620B006BA8BD/CCB2911F1DF6C7AF8525681000480140)**



----------------------------------------------------------------------------------------------------------


 





